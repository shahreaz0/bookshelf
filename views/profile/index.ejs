<%- include("../partials/top") %>

<h1><%= userProfile.fullName %> </h1>

<h3>All books uploaded by <%= userProfile.fullName %></h3>

<table class="ui green table unstackable">
    <thead>
        <tr>
            <th>Title</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% userProfile.posts.forEach(post => { %>

        <tr>
            <td data-label="Title"><%= post.title %> </td>
            <td data-label="Status">Public</td>

            <% if (user && post.creator.equals(user._id)) { %>

            <td data-label="Actions">
                <a class="ui button teal" href="/books/<%= post._id%>/edit">
                    <i class="edit outline icon"></i> Edit
                </a>

                <form action="/books/<%= post._id%>?_method=DELETE" method="POST" style="display: inline;">
                    <button class="ui button red" onclick="return confirm('Click Ok to delete post.');">
                        <i class="trash alternate outline icon"></i> Delete
                    </button>
                </form>

            </td>

            <% }  else { %>
            <td data-label="Actions">
                <a class="ui green button" href="<%= post.pdfFileUrl %>">
                    <i class="arrow down icon"></i> Download PDF
                </a>
            </td>
            <% }  %>

        </tr>

        <% }) %>
    </tbody>
</table>


<%- include("../partials/bottom") %>